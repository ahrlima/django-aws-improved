{
 "Resources": {
  "RdsPostgresSubnetGroupAD4B8DAA": {
   "Type": "AWS::RDS::DBSubnetGroup",
   "Properties": {
    "DBSubnetGroupDescription": "Subnet group for Postgres database",
    "SubnetIds": [
     {
      "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet1Subnet78D633E84B19C4D2"
     },
     {
      "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet2Subnet8686290868E2C3CB"
     },
     {
      "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet3SubnetE7CC1078431BA0A9"
     }
    ],
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/Postgres/SubnetGroup/Default"
   }
  },
  "RdsPostgresSecurityGroupE501963F": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for Postgres database",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ],
    "VpcId": {
     "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcC302751171D26A23"
    }
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/Postgres/SecurityGroup/Resource"
   }
  },
  "RdsPostgresSecurityGroupfromDataStackprdDbInitDbInitFunctionSecurityGroupF82E466C54327A0F92BC": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow DB init Lambda to reach PostgreSQL",
    "FromPort": 5432,
    "GroupId": {
     "Fn::GetAtt": [
      "RdsPostgresSecurityGroupE501963F",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "DbInitDbInitFunctionSecurityGroup3C11B9D5",
      "GroupId"
     ]
    },
    "ToPort": 5432
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/Postgres/SecurityGroup/from DataStackprdDbInitDbInitFunctionSecurityGroupF82E466C:5432"
   }
  },
  "DataStackprdRdsPostgresSecretC76EE6263fdaad7efa858a3daf9490cf0a702aeb": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "Description": {
     "Fn::Join": [
      "",
      [
       "Generated by the CDK for stack: ",
       {
        "Ref": "AWS::StackName"
       }
      ]
     ]
    },
    "GenerateSecretString": {
     "ExcludeCharacters": " %+~`#$&*()|[]{}:;<>?!'/@\"\\",
     "GenerateStringKey": "password",
     "PasswordLength": 30,
     "SecretStringTemplate": "{\"username\":\"postgres\"}"
    },
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/Postgres/Secret/Resource"
   }
  },
  "RdsPostgresSecretAttachment7FD3E63D": {
   "Type": "AWS::SecretsManager::SecretTargetAttachment",
   "Properties": {
    "SecretId": {
     "Ref": "DataStackprdRdsPostgresSecretC76EE6263fdaad7efa858a3daf9490cf0a702aeb"
    },
    "TargetId": {
     "Ref": "RdsPostgres07D44B8F"
    },
    "TargetType": "AWS::RDS::DBInstance"
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/Postgres/Secret/Attachment/Resource"
   }
  },
  "RdsPostgres07D44B8F": {
   "Type": "AWS::RDS::DBInstance",
   "Properties": {
    "AllocatedStorage": "100",
    "BackupRetentionPeriod": 35,
    "CopyTagsToSnapshot": true,
    "DBInstanceClass": "db.t3.small",
    "DBInstanceIdentifier": "prd-django-rds-and",
    "DBName": "appdb",
    "DBSubnetGroupName": {
     "Ref": "RdsPostgresSubnetGroupAD4B8DAA"
    },
    "DeletionProtection": true,
    "EnableCloudwatchLogsExports": [
     "postgresql"
    ],
    "EnableIAMDatabaseAuthentication": true,
    "Engine": "postgres",
    "EngineVersion": "16",
    "KmsKeyId": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":kms:us-east-1:559384370552:alias/aws/rds"
      ]
     ]
    },
    "MasterUserPassword": {
     "Fn::Join": [
      "",
      [
       "{{resolve:secretsmanager:",
       {
        "Ref": "DataStackprdRdsPostgresSecretC76EE6263fdaad7efa858a3daf9490cf0a702aeb"
       },
       ":SecretString:password::}}"
      ]
     ]
    },
    "MasterUsername": "postgres",
    "MultiAZ": true,
    "PubliclyAccessible": false,
    "StorageEncrypted": true,
    "StorageType": "gp2",
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ],
    "VPCSecurityGroups": [
     {
      "Fn::GetAtt": [
       "RdsPostgresSecurityGroupE501963F",
       "GroupId"
      ]
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/Postgres/Resource"
   }
  },
  "RdsPostgresLogRetentionpostgresql9721B3CE": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/rds/instance/",
       {
        "Ref": "RdsPostgres07D44B8F"
       },
       "/postgresql"
      ]
     ]
    },
    "RetentionInDays": 7
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/Postgres/LogRetentionpostgresql/Resource"
   }
  },
  "RdsPostgresReplicaSubnetGroup92852968": {
   "Type": "AWS::RDS::DBSubnetGroup",
   "Properties": {
    "DBSubnetGroupDescription": "Subnet group for PostgresReplica database",
    "SubnetIds": [
     {
      "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet1Subnet78D633E84B19C4D2"
     },
     {
      "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet2Subnet8686290868E2C3CB"
     },
     {
      "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet3SubnetE7CC1078431BA0A9"
     }
    ],
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/PostgresReplica/SubnetGroup/Default"
   }
  },
  "RdsPostgresReplicaSecurityGroupC90599B3": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for PostgresReplica database",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ],
    "VpcId": {
     "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcC302751171D26A23"
    }
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/PostgresReplica/SecurityGroup/Resource"
   }
  },
  "RdsPostgresReplica448236AD": {
   "Type": "AWS::RDS::DBInstance",
   "Properties": {
    "CopyTagsToSnapshot": true,
    "DBInstanceClass": "db.t3.small",
    "DBInstanceIdentifier": "prd-django-rds-replica-and",
    "DBSubnetGroupName": {
     "Ref": "RdsPostgresReplicaSubnetGroup92852968"
    },
    "DeletionProtection": true,
    "PubliclyAccessible": false,
    "SourceDBInstanceIdentifier": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":rds:us-east-1:559384370552:db:",
       {
        "Ref": "RdsPostgres07D44B8F"
       }
      ]
     ]
    },
    "StorageType": "gp2",
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ],
    "VPCSecurityGroups": [
     {
      "Fn::GetAtt": [
       "RdsPostgresReplicaSecurityGroupC90599B3",
       "GroupId"
      ]
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/Rds/PostgresReplica/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:PutRetentionPolicy",
        "logs:DeleteRetentionPolicy"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "Roles": [
     {
      "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Handler": "index.handler",
    "Runtime": "nodejs20.x",
    "Timeout": 900,
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-559384370552-us-east-1",
     "S3Key": "4e26bf2d0a26f2097fb2b261f22bb51e3f6b4b52635777b1e54edbd8e2d58c35.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      "Arn"
     ]
    },
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ]
   },
   "DependsOn": [
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
   ],
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource",
    "aws:asset:path": "asset.4e26bf2d0a26f2097fb2b261f22bb51e3f6b4b52635777b1e54edbd8e2d58c35",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DbInitDbInitFunctionServiceRole87B35C34": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/DbInit/DbInitFunction/ServiceRole/Resource"
   }
  },
  "DbInitDbInitFunctionServiceRoleDefaultPolicy5DFBFC74": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "rds-db:connect",
        "rds:DescribeDBInstances",
        "rds:GenerateDbAuthToken"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:GetSecretValue",
        "secretsmanager:DescribeSecret"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "RdsPostgresSecretAttachment7FD3E63D"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DbInitDbInitFunctionServiceRoleDefaultPolicy5DFBFC74",
    "Roles": [
     {
      "Ref": "DbInitDbInitFunctionServiceRole87B35C34"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/DbInit/DbInitFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DbInitDbInitFunctionSecurityGroup3C11B9D5": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function DataStackprdDbInitDbInitFunctionE52DBC3F",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ],
    "VpcId": {
     "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcC302751171D26A23"
    }
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/DbInit/DbInitFunction/SecurityGroup/Resource"
   }
  },
  "DbInitDbInitFunction5CEA59D9": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-559384370552-us-east-1",
     "S3Key": "4b8787b4106e569e50b322e19ddd05b0ed4a0d570e194c615e3bd753c5874cd7.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "RdsPostgres07D44B8F",
        "Endpoint.Address"
       ]
      },
      "DB_USER": "postgres",
      "DB_NAME": "appdb",
      "APP_USER": "app_user",
      "DB_SECRET_ARN": {
       "Ref": "RdsPostgresSecretAttachment7FD3E63D"
      }
     }
    },
    "FunctionName": "prd-django-lambda-dbinit-and",
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "DbInitDbInitFunctionServiceRole87B35C34",
      "Arn"
     ]
    },
    "Runtime": "python3.12",
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "DbInitDbInitFunctionSecurityGroup3C11B9D5",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet1Subnet78D633E84B19C4D2"
      },
      {
       "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet2Subnet8686290868E2C3CB"
      },
      {
       "Fn::ImportValue": "NetworkStack-prd:ExportsOutputRefVpcprddjangosubnetprivateandSubnet3SubnetE7CC1078431BA0A9"
      }
     ]
    }
   },
   "DependsOn": [
    "DbInitDbInitFunctionServiceRoleDefaultPolicy5DFBFC74",
    "DbInitDbInitFunctionServiceRole87B35C34"
   ],
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/DbInit/DbInitFunction/Resource",
    "aws:asset:path": "asset.4b8787b4106e569e50b322e19ddd05b0ed4a0d570e194c615e3bd753c5874cd7",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DbInitDbInitTrigger72A4FC8C": {
   "Type": "Custom::DjangoDbInit",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "AWS679f53fac002430cb0da5b7982bd22872D164C4C",
      "Arn"
     ]
    },
    "Create": {
     "Fn::Join": [
      "",
      [
       "{\"service\":\"Lambda\",\"action\":\"invoke\",\"parameters\":{\"FunctionName\":\"",
       {
        "Ref": "DbInitDbInitFunction5CEA59D9"
       },
       "\"},\"physicalResourceId\":{\"id\":\"prd-django-dbinit-and\"}}"
      ]
     ]
    },
    "Update": {
     "Fn::Join": [
      "",
      [
       "{\"service\":\"Lambda\",\"action\":\"invoke\",\"parameters\":{\"FunctionName\":\"",
       {
        "Ref": "DbInitDbInitFunction5CEA59D9"
       },
       "\"}}"
      ]
     ]
    },
    "InstallLatestAwsSdk": true
   },
   "DependsOn": [
    "DbInitDbInitTriggerCustomResourcePolicyAE2EF4BB"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/DbInit/DbInitTrigger/Resource/Default"
   }
  },
  "DbInitDbInitTriggerCustomResourcePolicyAE2EF4BB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DbInitDbInitFunction5CEA59D9",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DbInitDbInitTriggerCustomResourcePolicyAE2EF4BB",
    "Roles": [
     {
      "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/DbInit/DbInitTrigger/CustomResourcePolicy/Resource"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd22872D164C4C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-559384370552-us-east-1",
     "S3Key": "97f30e67419a1676a2215492723e5add1aa491caf0cbe2dd878fc4fab0468cd4.zip"
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Confidentiality",
      "Value": "secret"
     },
     {
      "Key": "Environment",
      "Value": "prd"
     },
     {
      "Key": "ManagedBy",
      "Value": "cdk"
     },
     {
      "Key": "Owner",
      "Value": "platform-team"
     },
     {
      "Key": "Project",
      "Value": "django-ecs"
     }
    ],
    "Timeout": 120
   },
   "DependsOn": [
    "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"
   ],
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/AWS679f53fac002430cb0da5b7982bd2287/Resource",
    "aws:asset:path": "asset.97f30e67419a1676a2215492723e5add1aa491caf0cbe2dd878fc4fab0468cd4",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/31RTW/CMAz9LdzT0BVx2G18aBPSDqjdHbmpFwJpUsXuEKr636em0G0cdnr28/Pzk5zJp2Umu3QGF0pUdU6sKWVXMKizyJF8GxQKuNChCxXJbgsMJRDuHDE4haJoS4f8FnzbiM2n265/E3d1gSogj/Np89EqR6hybKxR0AtUmewKVG0wfJ3c/yd2Tgck6gXFc1SDA41BdqNwSDDCBwSNvGIGdazRsZgEj5NeWK9JvnudI6Nj452gxQGIkEmuBhC0kOtWnZHXQCgM1LLLvcXBNOLeW6OuQztWvbBQlxXEXK+tU9G1ME5bZP/D3Iu+j1b3X8SjBYM2TgvVEvv6EG5DkqsLbSI36f+2vUgTsM0RZDp7ub18PuCYKWmufPTuJtnHZsohnK9Qnmj+laXy6VkuZycyJgmtY1OjzEf8BvO5VNdRAgAA"
   },
   "Metadata": {
    "aws:cdk:path": "DataStack-prd/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ExportsOutputFnGetAttRdsPostgres07D44B8FEndpointAddressCD0C0DEA": {
   "Value": {
    "Fn::GetAtt": [
     "RdsPostgres07D44B8F",
     "Endpoint.Address"
    ]
   },
   "Export": {
    "Name": "DataStack-prd:ExportsOutputFnGetAttRdsPostgres07D44B8FEndpointAddressCD0C0DEA"
   }
  },
  "ExportsOutputRefRdsPostgresSecretAttachment7FD3E63DD9020778": {
   "Value": {
    "Ref": "RdsPostgresSecretAttachment7FD3E63D"
   },
   "Export": {
    "Name": "DataStack-prd:ExportsOutputRefRdsPostgresSecretAttachment7FD3E63DD9020778"
   }
  },
  "ExportsOutputFnGetAttRdsPostgresSecurityGroupE501963FGroupId19A4CA18": {
   "Value": {
    "Fn::GetAtt": [
     "RdsPostgresSecurityGroupE501963F",
     "GroupId"
    ]
   },
   "Export": {
    "Name": "DataStack-prd:ExportsOutputFnGetAttRdsPostgresSecurityGroupE501963FGroupId19A4CA18"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}